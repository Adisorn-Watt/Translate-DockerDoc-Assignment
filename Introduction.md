## Introduction
เอกสารนี้ครอบคลุมแนวทางปฏิบัติและวิธีการที่ดีที่สุดที่แนะนำสำหรับการสร้าง image ที่มีประสิทธิภาพ

Docker จะทำการสร้าง image โดยอัตโนมัติ โดยการอ่านคำสั่ง (instruction) จากไฟล์ `Dockerfile`
ซึ่งเป็นไฟล์แบบ text ที่ประกอบไปด้วยคำสั่งทั้งหมดแบบเรียงตามลำดับที่จำเป็นสำหรับการสร้าง image
ไฟล์ `Dockerfile` มีรูปแบบการเขียนและชุดคำสั่งที่มีความเฉพาะตัว ซึ่งสามารถหาวิธีการเขียนที่ถูกต้องได้จาก
[Dockerfile reference](https://docs.docker.com/engine/reference/builder/)

Image ของ Docker ประกอบไปด้วยเลเยอร์ แบบอ่านได้อย่างเดียว (Read-only) หลาย ๆ ชั้น
ซึ่งแต่ละชั้นจะเป็นคำสั่งในไฟล์ Dockerfile โดยที่แต่ละเลเยอร์จะซ้อนกัน
และแต่ละชั้นจะเป็นผลจากการเปลี่ยนแปลงจากเลเยอร์ชั้นก่อนหน้า
เมื่อทำการพิจารณา `Dockerfile` อันนี้ :


```
FROM ubuntu:18.04
COPY . /app
RUN make /app
CMD python /app/app.py
```


แต่ละคำสั่งจะสร้างเลเยอร์ขึ้นมา 1 ชั้น
* FROM สร้าง (create) เลเยอร์จาก image ubuntu:18.04
* COPY เพิ่มไฟล์จาก directory ปัจจุบันของ Client Docker
* RUN สร้าง (build) แอปพลิเคชันด้วย make
* CMD เจาะจงว่าคำสั่งใดที่จะถูกรันใน Container


เมื่อคุณทำการรัน image และสร้าง Container ขึ้นมา มันคือการที่คุณเพิ่ม "เลเยอร์ที่เขียนได้"
(Writable layer หรือ "Container layer")ไว้ด้านบนเลเยอร์ทั้งหมด การเปลี่ยนเปลงทั้งหมดที่กระทำกับ container ที่กำลังรัน เช่น เขียนไฟล์ใหม่, แก้ไขไฟล์ที่มีอยูเดิม หรือลบไฟล์ทิ้ง การกระทำเหล่านี้จะถูกเขียนลงไปใน Container layer อันบาง ๆ ที่กล่าวมานี้

ข้อมูลเพิ่มเติมสำหรับเลเยอร์ image (และวิธีการที่ Docker สร้างและเก็บ image) [About storage drivers](https://docs.docker.com/storage/storagedriver/).