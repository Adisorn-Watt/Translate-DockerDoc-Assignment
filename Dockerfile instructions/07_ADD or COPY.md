# EXPOSE

อ้างอิงจาก [Dockerfile สำหรับการใช้ ADD](https://docs.docker.com/engine/reference/builder/#add
)

อ้างอิงจาก [Dockerfile สำหรับการใช้ COPY](https://docs.docker.com/engine/reference/builder/#copy
)

แม้ว่า `ADD` และ `COPY` จะคล้ายกันกับการใช้งานโดยทั่วไป `COPY` เป็นที่ต้องการ เพราะมันมีความง่ายมากกว่า `ADD` `COPY` แค่รองรับเฉพาะการคัดลอกไฟล์ทั่วไป จากโลคอลไฟล์ ไปยังคอนเทนเนอร์เท่านั้น ในขณะที่ `ADD` มีคุณสมบัติบางอย่าง ( เช่นการแยก tar เฉพาะโลคัล และการสนับสนุน URL ระยะไกล ) ที่ไม่ชัดเจนในทันที ดังนั้นการใช้งานที่ดีที่สุดสำหรับ `ADD` คือโลคัลไฟล์ tar ในเครื่องจะทำการแยกอิมเมจดั่งคำสั่ง `ADD rootfs.tar.xz /` โดยอัตโนมัติ

ถ้าหากคุณมี `Dockerfile` หลายขั้นตอนที่ใช้ไฟล์ที่แตกต่างกันจากบริบทของคุณ  คำสั่ง`COPY` นั้นจะทำทีละอย่าง เยอะกว่าทำทั้งหมดในครั้งเดียว สิ่งนี้ทำให้มั่นใจได้ว่าการสร้างแคชของแต่ละขั้นตอนจะไม่มีผลเท่านั้น ( บังคับให้ขั้นตอนนั้นต้องเรียกใช้อีกครั้ง )หากไฟล์ที่ต้องการโดยเฉพาะเปลี่ยนไป

ตัวอย่างเช่น:
```
COPY requirements.txt /tmp/
RUN pip install --requirement /tmp/requirements.txt
COPY . /tmp/
```
ส่งผลให้แคชไม่เกิดสำหรับขั้นตอนการ `RUN` น้อยกว่าแคชไม่เกิดที่เกิดจากคุณใส่ `COPY . /tmp/` ไปก่อนหน้า

เนื่องจากขนาดอิมเมจมีความสำคัญ การใช้ `ADD` เพื่อดึงแพคเกจจาก URL ระยะไกล จึงไม่สนับสนุนอย่างยิ่ง คุณควรใช้ `curl` หรือ `wget` แทน ด้วยวิธีนี้คุณจะสามารถลบไฟล์ที่คุณไม่ต้องการหลังจากที่แตกไฟล์ได้ และคุณไม่ต้องเพิ่มเลเยอร์อื่นในอิมเมจของคุณ ตัวอย่างเช่นคุณควรหลีกเลี่ยงการทำสิ่งต่างๆ ดังนี้:
```
ADD http://example.com/big.tar.xz /usr/src/things/
RUN tar -xJf /usr/src/things/big.tar.xz -C /usr/src/things
RUN make -C /usr/src/things all
```
และให้เปลี่ยนมาทำแบบนี้แทน:
```
RUN mkdir -p /usr/src/things \
    && curl -SL http://example.com/big.tar.xz \
    | tar -xJC /usr/src/things \
    && make -C /usr/src/things all
```
สำหรับรายการอื่นๆ (แฟ้ม ,ไดเรกทอรี) ที่ไม่จำเป็นต้องมี `ADD`'s tar ที่มีความสามารถในการแยกอัตโนมัติ  คุณก็ควรจะใช้ `COPY`