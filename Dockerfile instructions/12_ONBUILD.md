# ONBUILD

ไฟล์อ้างอิง Docker สำหรับคำแนะนำของ WORKDIR : <https://docs.docker.com/engine/reference/builder/#onbuild/>

คำสั่ง `ONBUILD` จะทำงานหลังจาก `Dockerfile` ปัจจุบันสร้างสำเร็จ `ONBUILD` จะทำงานในอิมเมจใดๆที่ได้มา `FROM` จากอิมเมจปัจจุบัน คิดถึงคำสั่ง `ONBUILD` เหมือนกับดคำแนะนำจาก `Dockerfile` ผู้ใหญ่ที่ส่งต่อไปยัง `Dockerflie` ลูก

Docker build รันคำสั่ง `ONBUILD` ก่อนคำสั่งใดๆใน `Dockerfile` ลูก

`ONBUILD` เป็นประโยชน์สำหรับอิมเมจที่กำลังจะสร้าง `FROM` จากอิมเมจที่มีให้ ยกตัวอย่างเช่น คุณสามารถใช้ `ONBUILD` สำหรับอิมเม็จที่มีภาษาที่สร้างซอฟต์แวร์ผู้ใช้เองที่เขียนขึ้นในภาษานั้นภายใน `Dockerfile` ดังที่คุณเห็นในตัวแปร `ONBUILD` ของ `Ruby`

อิมเมจที่สร้างกับ `ONBUILD` ควรจะมีชื่อเรียกแยกเช่น: `ruby:1.9-onbuild` หรือ `ruby:2.0-onbuild`

ระวังเมื่อใส่ `ADD` หรือ `COPY` ใน `ONBUILD` อิมเม็จที่ใช้ "onbuild" นั้นจะพังย่อยยับถ้าบริบทของการสร้างอันใหม่หาแหล่งที่มาที่เพิ่มเข้ามาใหม่ไม่เจอ การใส่ชื่อเรียกแยกดังที่ได้แนะนำไว้ข้างต้นจะช่วยลดความผิดพลาดโดยจะทำให้ผู้เขียนไฟล์มีทางเลือกในการตัดสินใจ
